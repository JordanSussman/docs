<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.59.1" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/docs/favicons/android-96x196.png" sizes="96x196">
<link rel="icon" type="image/png" href="/docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/docs/favicons/android-192x192.png"sizes="192x192">

<title>Docker | Vela</title><meta property="og:title" content="Docker" />
<meta property="og:description" content="Overview This plugin was originally used to build all Docker images. The functionality of this plugin still exists within Kaniko  This plugin enables the ability to build and publish Docker images in a Vela pipeline. Plugin requires the pipeline to run on a worker that provides the plugin elevated access.
Source Code: https://github.com/go-vela/vela-docker
Registry: https://hub.docker.com/r/target/vela-docker
Usage Users should refrain from using latest as the tag for the Docker image." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://go-vela.github.io/docs/plugins/pipeline/registry/docker/" />
<meta property="article:modified_time" content="2020-10-23T15:48:00-05:00" />
<meta itemprop="name" content="Docker">
<meta itemprop="description" content="Overview This plugin was originally used to build all Docker images. The functionality of this plugin still exists within Kaniko  This plugin enables the ability to build and publish Docker images in a Vela pipeline. Plugin requires the pipeline to run on a worker that provides the plugin elevated access.
Source Code: https://github.com/go-vela/vela-docker
Registry: https://hub.docker.com/r/target/vela-docker
Usage Users should refrain from using latest as the tag for the Docker image.">


<meta itemprop="dateModified" content="2020-10-23T15:48:00-05:00" />
<meta itemprop="wordCount" content="1044">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker"/>
<meta name="twitter:description" content="Overview This plugin was originally used to build all Docker images. The functionality of this plugin still exists within Kaniko  This plugin enables the ability to build and publish Docker images in a Vela pipeline. Plugin requires the pipeline to run on a worker that provides the plugin elevated access.
Source Code: https://github.com/go-vela/vela-docker
Registry: https://hub.docker.com/r/target/vela-docker
Usage Users should refrain from using latest as the tag for the Docker image."/>







<link rel="preload" href="/docs/scss/main.min.70d8bad3cbfd44b25762dfb0cadb082e7e2c882cbc3cb7ff0b318df81507856d.css" as="style">
<link href="/docs/scss/main.min.70d8bad3cbfd44b25762dfb0cadb082e7e2c882cbc3cb7ff0b318df81507856d.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


    <title>Docker | Vela</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/docs/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1500"><title>vela-inverse</title><polygon points="1477.22 329.54 1338.11 219.91 1349.56 43.16 1202.3 141.58 1037.73 76.07 1085.84 246.54 972.68 382.81 1149.67 389.74 1244.3 539.46 1305.58 373.27 1477.22 329.54" style="fill:#9e6bae"/><path d="M1174.75 635.12 757.57 1357.69a3.47 3.47.0 0 1-6 0L125.38 273.13a3.48 3.48.0 0 1 3-5.22H925.24l39.14-47.13L950.19 170.5H128.39A100.9 100.9.0 0 0 41 321.84L667.19 1406.4a100.88 100.88.0 0 0 174.74.0l391.61-678.27z" style="fill:#34c6f4"/><polygon points="1087.64 497.29 1038.27 495.36 754.56 986.75 395.9 365.54 288.13 365.54 754.56 1173.42 1117.58 544.66 1087.64 497.29" style="fill:#fff"/></svg></span><span class="text-uppercase font-weight-bold">Vela</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/concepts/" ><span>Concepts</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/install/" ><span>Install</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/usage/" ><span>Usage</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/plugins/" ><span class="active">Plugins</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/templates/" ><span>Templates</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/api/" ><span>API</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/cli/" ><span>CLI</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/docs/sdk/" ><span>SDK</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><div>
    

    <div class="search -navbar" id="search1">
        <input id="search1input" type="text" placeholder="Search site..." v-model="txt" @blur="close()" maxlength="50">
        <div class="search-results" :style="{'display': showresult?'block':'none'}">
            <a v-for="item in result" :href="item.url">{{ item.display }}</a>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js" integrity="sha256-mpnrJ5DpEZZkwkE1ZgkEQQJW/46CSEh/STrZKOB/qoM=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js" integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin="anonymous"></script>
    <script>
        let mounted = function() {
            
            document.getElementById("search1input").addEventListener("keyup", e => {
                this.txt = e.target.value;
                this.search();
            });
            
            axios.get('https:\/\/go-vela.github.io\/docs\/search\/index.json')
                .then(function(response) {
                    vuesearch1.bdd = response.data.results;
                })
                .catch(function(error) {
                    console.log(error);
                });
        }
        let close = function() {
            
            
            setTimeout(function() {
                vuesearch1.showresult = false;
                vuesearch1.txt = '';
            }, 300);
        }
        let search = function() {
            
            clearTimeout(this.timeoutID);
            this.timeoutID = setTimeout(this.dosearch, 500);
        }

        let dosearch = function() {
            
            this.result = []; 
            let words = this.txt.split(' '); 
            let words2 = []; 
            words.forEach(function(element) { 
                if (element) {
                    words2.push(element);
                }
            });
            let r;
            let resultmp;
            words2.forEach(function(e) {
                r = vuesearch1.bdd.filter(p => p.content.indexOf(e.toLowerCase()) !== -1);
                if (vuesearch1.result.length === 0) {
                    vuesearch1.result = r.slice();
                    return;
                }
                resultmp = [];
                vuesearch1.result.forEach(function(all1) {
                    r.forEach(function(all2) {
                        if (all1.url === all2.url) {
                            resultmp.push(all1);
                        }
                    });
                });
                vuesearch1.result = resultmp.slice();
            });
            this.result = this.result.slice(0, 10); 
            this.result = this.result.sort(function (a, b) {
                return ('' + a.display).localeCompare(b.display);
            })
            this.showresult = (this.result.length > 0);
        }
        let vuesearch1 = new Vue({
            el: '#search1',
            data: {
                txt: '',
                timeoutID: 0,
                showresult: false,
                result: {},
                bdd: []
            },
            mounted: mounted,
            methods: {
                close: close,
                search: search,
                dosearch: dosearch
            }
        });
    </script>
</div></div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    <div>
    <div class="search -sidebar" id="search2">
        <input id="search2input" type="text" placeholder="Search site..." v-model="txt" @blur="close()" maxlength="50">
        <div class="search-results" :style="{'display': showresult?'block':'none'}">
            <a v-for="item in result" :href="item.url">{{ item.display }}</a>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js" integrity="sha256-mpnrJ5DpEZZkwkE1ZgkEQQJW/46CSEh/STrZKOB/qoM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js" integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin="anonymous"></script>
<script>
    let mounted_sidebar = function() {
        document.getElementById("search2input").addEventListener("keyup", e => {
            this.txt = e.target.value;
            this.search();
        });
        axios.get('https:\/\/go-vela.github.io\/docs\/search\/index.json')
            .then(function(response) {
                vuesearch2.bdd = response.data.results;
            })
            .catch(function(error) {
                console.log(error);
            });
    }
    let close_sidebar = function() {
        setTimeout(function() {
            vuesearch2.showresult = false;
            vuesearch2.txt = '';
        }, 300);
    }

    let dosearch_sidebar = function() {
        this.result = [];
        var words = this.txt.split(' ');
        var words2 = [];
        words.forEach(function(element) {
            if (element) {
                words2.push(element);
            }
        });
        var r;
        var resultmp;
        words2.forEach(function(e) {
            r = vuesearch2.bdd.filter(p => p.content.indexOf(e.toLowerCase()) !== -1);
            if (vuesearch2.result.length === 0) {
                vuesearch2.result = r.slice();
                return;
            }
            resultmp = [];
            vuesearch2.result.forEach(function(all1) {
                r.forEach(function(all2) {
                    if (all1.url === all2.url) {
                        resultmp.push(all1);
                    }
                });
            });
            vuesearch2.result = resultmp.slice();
        });
        this.result = this.result.slice(0, 10);
        this.result = this.result.sort(function (a, b) {
            return ('' + a.display).localeCompare(b.display);
        })
        this.showresult = (this.result.length > 0);
    }
    let vuesearch2 = new Vue({
        el: '#search2',
        data: {
            txt: '',
            timeoutID: 0,
            showresult: false,
            result: {},
            bdd: []
        },
        mounted: mounted_sidebar,
        methods: {
            close: close_sidebar,
            search: search,
            dosearch: dosearch_sidebar
        }
    });
</script>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Plugins</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-plugins">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-overview" href="/docs/plugins/overview/">Overview</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/pipeline/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Pipeline</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-plugins-pipeline">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/pipeline/registry/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Registry</a>
  </li>
  <ul>
    <li class="collapse show" id="docs-plugins-pipeline-registry">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-artifactory" href="/docs/plugins/pipeline/registry/artifactory/">Artifactory</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-captains-log" href="/docs/plugins/pipeline/registry/captains_log/">Captain&#39;s Log</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docs-plugins-pipeline-registry-docker" href="/docs/plugins/pipeline/registry/docker/">Docker</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-downstream" href="/docs/plugins/pipeline/registry/downstream/">Downstream</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-git" href="/docs/plugins/pipeline/registry/git/">Git</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-kaniko" href="/docs/plugins/pipeline/registry/kaniko/">Kaniko</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-kubernetes" href="/docs/plugins/pipeline/registry/kubernetes/">Kubernetes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-makisu" href="/docs/plugins/pipeline/registry/makisu/">Makisu</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-s3-cache" href="/docs/plugins/pipeline/registry/s3_cache/">S3 Cache</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-registry-terraform" href="/docs/plugins/pipeline/registry/terraform/">Terraform</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/pipeline/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="docs-plugins-pipeline-tutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-tutorials-bash" href="/docs/plugins/pipeline/tutorials/bash/">Bash</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-tutorials-go" href="/docs/plugins/pipeline/tutorials/go/">Go</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-tutorials-node" href="/docs/plugins/pipeline/tutorials/node/">Node.js</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-tutorials-python" href="/docs/plugins/pipeline/tutorials/python/">Python</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-pipeline-tutorials-ruby" href="/docs/plugins/pipeline/tutorials/ruby/">Ruby</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/secret/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Secret</a>
  </li>
  <ul>
    <li class="collapse " id="docs-plugins-secret">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/secret/registry/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Registry</a>
  </li>
  <ul>
    <li class="collapse " id="docs-plugins-secret-registry">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docs-plugins-secret-registry-vault" href="/docs/plugins/secret/registry/vault/">Vault</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/plugins/secret/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="docs-plugins-secret-tutorials">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">



<a href="https://github.com/go-vela/docs/edit/master/content/plugins/pipeline/registry/docker.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/go-vela/docs/issues/new?title=Docker" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#secrets">Secrets</a>
<ul>
<li><a href="#internal">Internal</a></li>
<li><a href="#external">External</a></li>
</ul></li>
<li><a href="#parameters">Parameters</a>
<ul>
<li><a href="#registry">Registry</a></li>
<li><a href="#build-and-push">Build and Push</a></li>
<li><a href="#daemon">Daemon</a></li>
</ul></li>
<li><a href="#template">Template</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="https://go-vela.github.io/docs/plugins/">Plugins</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://go-vela.github.io/docs/plugins/pipeline/">Pipeline</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://go-vela.github.io/docs/plugins/pipeline/registry/">Registry</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://go-vela.github.io/docs/plugins/pipeline/registry/docker/">Docker</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Docker</h1>
	
	

<h2 id="overview">Overview</h2>



<div class="alert alert-warning" role="alert">

This plugin was originally used to build <strong>all</strong> Docker images. The functionality of this plugin still exists within <a href="/docs/plugins/pipeline/registry/kaniko">Kaniko</a>
</div>


<p>This plugin enables the ability to build and publish <a href="https://www.docker.com/" target="_blank">Docker</a> images in a Vela pipeline. Plugin requires the pipeline to run on a worker that provides the plugin elevated access.</p>

<p>Source Code: <a href="https://github.com/go-vela/vela-docker" target="_blank">https://github.com/go-vela/vela-docker</a></p>

<p>Registry: <a href="https://hub.docker.com/r/target/vela-docker" target="_blank">https://hub.docker.com/r/target/vela-docker</a></p>

<h2 id="usage">Usage</h2>



<div class="alert alert-warning" role="alert">

<p>Users should refrain from using <code>latest</code> as the tag for the Docker image.</p>

<p>It is recommended to use a semantically versioned tag instead.</p>

</div>


<p>Sample of building and publishing an image:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">steps<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>-<span style="color:#f8f8f8;text-decoration:underline"> </span>name<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>publish_hello-world<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>image<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>target/vela-docker<span style="color:#000;font-weight:bold">:</span>latest<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>pull<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>always<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>parameters<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>registry<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>index.docker.io<span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>tags<span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span>index.docker.io/octocat/hello-world<span style="color:#000;font-weight:bold">:</span>latest<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span></code></pre></div>
<p>Sample of building an image without publishing:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish hello world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world:latest ]    
<span style="color:#00a000">+     dry_run: true
</span></code></pre></div>
<p>Sample of building and publishing an image with custom tags:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish hello world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
<span style="color:#00a000">+     tags: 
</span><span style="color:#00a000">+       - index.docker.io/octocat/hello-world:latest
</span><span style="color:#00a000">+       - index.docker.io/octocat/hello-world:1
</span><span style="color:#00a000">+       - index.docker.io/octocat/hello-world:foobar
</span></code></pre></div>
<p>Sample of building and publishing an image with build arguments:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish hello world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world ]    
<span style="color:#00a000">+     build_args:
</span><span style="color:#00a000">+       - FOO=bar
</span></code></pre></div>
<p>Sample of building and publishing an image with image caching:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish_hello-world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world:latest ]    
<span style="color:#00a000">+     cache_from: index.docker.io/octocat/hello-world
</span></code></pre></div>
<p>Sample of building and publishing with custom daemon settings:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish_hello-world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world:latest ]    
<span style="color:#00a000">+     daemon: 
</span><span style="color:#00a000">+       registry_mirror: mirror.index.docker.io
</span></code></pre></div>
<h2 id="secrets">Secrets</h2>



<div class="alert alert-warning" role="alert">

Users should refrain from configuring sensitive information in their pipeline in plain text.
</div>


<h3 id="internal">Internal</h3>

<p>The plugin accepts the following <code>parameters</code> for authentication:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Environment Variable Configuration</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>password</code></td>
<td><code>DOCKER_PASSWORD</code>, <code>REGISTRY_PASSWORD</code>, <code>PARAMETER_PASSWORD</code></td>
</tr>

<tr>
<td><code>username</code></td>
<td><code>DOCKER_USERNAME</code>, <code>REGISTRY_USERNAME</code>, <code>PARAMETER_USERNAME</code></td>
</tr>
</tbody>
</table>

<p>Users can use <a href="/docs/concepts/pipeline/secrets/">Vela internal secrets</a> to substitute these sensitive values at runtime:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish_hello-world
    image: target/vela-docker:latest
    pull: always
<span style="color:#00a000">+   secrets: [ docker_username, docker_password ]
</span><span style="color:#00a000"></span>    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world:latest ] 
<span style="color:#a40000">-     username: octocat
</span><span style="color:#a40000">-     password: superSecretPassword
</span></code></pre></div>


<div class="alert alert-info" role="alert">

This example will add the <code>secrets</code> to the <code>publish_hello-world</code> step as environment variables:</p>

<ul>
<li><code>DOCKER_USERNAME=&lt;value&gt;</code></li>
<li><code>DOCKER_PASSWORD=&lt;value&gt;</code></li>
</ul>
</div>


<h3 id="external">External</h3>

<p>The plugin accepts the following files for authentication:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Volume Configuration</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>password</code></td>
<td><code>/vela/parameters/docker/registry/password</code>, <code>/vela/secrets/docker/registry/password</code>, <code>/vela/secrets/docker/password</code></td>
</tr>

<tr>
<td><code>username</code></td>
<td><code>/vela/parameters/docker/registry/username</code>, <code>/vela/secrets/docker/registry/username</code>, <code>/vela/secrets/docker/username</code></td>
</tr>
</tbody>
</table>

<p>Users can use <a href="/docs/concepts/pipeline/secrets/">Vela external secrets</a> to substitute these sensitive values at runtime:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff">steps:
  - name: publish_hello-world
    image: target/vela-docker:latest
    pull: always
    parameters:
      registry: index.docker.io
      tags: [ index.docker.io/octocat/hello-world:latest ] 
<span style="color:#a40000">-     username: octocat
</span><span style="color:#a40000">-     password: superSecretPassword
</span></code></pre></div>


<div class="alert alert-info" role="alert">

This example will read the secrets values in the volume stored at <code>/vela/secrets/</code>:
</div>


<h2 id="parameters">Parameters</h2>



<div class="alert alert-info" role="alert">

<ul>
<li>the plugin supports reading all parameters via environment variables or files</li>
<li>values set from a file take precedence over values set from the environment</li>
<li>by default <a href="https://docs.docker.com/develop/develop-images/build_enhancements/" target="_blank">build kit</a> is on, it can be turned off by setting <code>DOCKER_BUILDKIT=0</code> in the environment</li>
<li><code>key.key</code> syntax signifies a new yaml object within the definition.</li>
</ul>
</div>


<h3 id="registry">Registry</h3>

<p>The following parameters are used to configure the image:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>dry_run</code></td>
<td>enables building the image without publishing</td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>

<tr>
<td><code>registry</code></td>
<td>Docker registry address to communicate with</td>
<td><code>true</code></td>
<td><code>index.docker.io</code></td>
</tr>

<tr>
<td><code>password</code></td>
<td>password for communication with the registry</td>
<td><code>true</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>username</code></td>
<td>user name for communication with the registry</td>
<td><code>true</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>

<h3 id="build-and-push">Build and Push</h3>

<p>The following parameters are used to configure the image:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>add_hosts</code></td>
<td>enables adding a custom host-to-IP mapping - format (host:ip)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>build_args</code></td>
<td>enables setting build-time variables</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cache_from</code></td>
<td>enables setting images to consider as cache sources</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cgroup_parent</code></td>
<td>enables setting an optional parent cgroup for the container</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>compress</code></td>
<td>enables setting compression the build context using gzip</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>context</code></td>
<td>enables setting the build context</td>
<td><code>true</code></td>
<td><code>.</code></td>
</tr>

<tr>
<td><code>cpu.period</code></td>
<td>enables setting limits on the CPU CFS (Completely Fair Scheduler) period</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cpu.quota</code></td>
<td>enables setting limit on the CPU CFS (Completely Fair Scheduler) quota</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cpu.shares</code></td>
<td>enables setting CPU shares (relative weight)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cpu.set_cpus</code></td>
<td>enables setting CPUs in which to allow execution (0-3, 0,1)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>cpu.set_mems</code></td>
<td>enables setting MEMs in which to allow execution (0-3, 0,1)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>disable_content_trust</code></td>
<td>enables skipping image verification</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>file</code></td>
<td>enables setting the name of the Dockerfile</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>force_rm</code></td>
<td>enables setting always remove on intermediate containers</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>image_id_file</code></td>
<td>enables setting writing the image ID to the file</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>isolation</code></td>
<td>enables container isolation technology</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>labels</code></td>
<td>enables setting metadata for an image</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>memory</code></td>
<td>enables setting a memory limit</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>memory_swaps</code></td>
<td>enables setting a swap limit equal to memory plus swap: &lsquo;-1&rsquo; to enable unlimited swap</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>network</code></td>
<td>enables setting the networking mode for the RUN instructions during build</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>no_cache</code></td>
<td>enables setting not use cache when building the image</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>outputs</code></td>
<td>enables setting an output destination - format (type=local,dest=path)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>platform</code></td>
<td>enables setting a platform if server is multi-platform capable</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>progress</code></td>
<td>enables setting type of progress output - options (auto</td>
<td>plain</td>
<td>tty)</td>
</tr>

<tr>
<td><code>pull</code></td>
<td>enables always attempting to pull a newer version of the image</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>quiet</code></td>
<td>enables suppressing the build output and print image ID on success</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>remove</code></td>
<td>enables removing the intermediate containers after a successful build</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>secrets</code></td>
<td>enables setting a secret file to expose to the build - format (id=mysecret,src=/local/secret)</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>security_opts</code></td>
<td>enables setting security options</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>shm_sizes</code></td>
<td>enables setting the size of /dev/shm</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>squash</code></td>
<td>enables setting squash newly built layers into a single new layer</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>ssh_components</code></td>
<td>enables setting an ssh agent socket or keys to expose to the build - format (default</td>
<td><id>[=<socket></td>
<td><key>[,<key>]])</td>
</tr>

<tr>
<td><code>stream</code></td>
<td>enables streaming attaches to server to negotiate build context</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>tags</code></td>
<td>enables naming and optionally a tagging - format (name:tag)</td>
<td><code>true</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>target</code></td>
<td>enables setting the target build stage to build.</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>ulimits</code></td>
<td>enables setting ulimit options</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>

<h3 id="daemon">Daemon</h3>

<p>The following parameters are used to configure the image:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>bip</code></td>
<td>enables specifying a network bridge IP</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>dns.servers</code></td>
<td>enables setting the DNS server to use</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>dns.searches</code></td>
<td>enables setting the DNS search domains to use</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>experimental</code></td>
<td>enables experimental features</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>insecure_registries</code></td>
<td>enables insecure registry communication</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>ipv6</code></td>
<td>enables IPv6 networking</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>mtu</code></td>
<td>enables setting the containers network MTU</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>registry_mirrors</code></td>
<td>enables setting a preferred Docker registry mirror</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>storage.drivers</code></td>
<td>enables setting an alternate storage driver</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>

<tr>
<td><code>storage.opts</code></td>
<td>enables setting options on the alternate storage driver</td>
<td><code>false</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>

<h2 id="template">Template</h2>

<p>COMING SOON!</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>Below are a list of common problems and how to solve them:</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified October 23, 2020: <a  href="https://github.com/go-vela/docs/commit/0db86a6111f073ca88d1e32bafc10c9fe97d589a">feat: add docker plugin docs (#177) (0db86a6)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/go-vela">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="https://gophers.slack.com/app_redirect?channel=CNRRKE8KY">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" href="mailto:vela@target.com">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 Target Brands All Rights Reserved</small>
        <small class="ml-1"><a href="https://github.com/go-vela/server/blob/master/LICENSE" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>






<script src="/docs/js/main.min.249bfd804cb79020e7c423ccdbcde3013d7a34a1365fe174e162d05ba8fbbfdf.js" integrity="sha256-JJv9gEy3kCDnxCPM283jAT16NKE2X&#43;F04WLQW6j7v98=" crossorigin="anonymous"></script>



  </body>
</html>